{% extends 'Contenedor_Calificaciones/base.html' %}
{% load static %}

{% block navbar %}
    <nav class="navbar border-bottom border-body navbar-dark">
        <div class="container-fluid">
            <a class="navbar-brand m-2" href="{% url 'Inicio_Calificador' %}">
                <img src="{% static 'Contenedor_Calificaciones/images/logoNuam.png' %}" width="190px" height="50px">
            </a>
            <div class="d-flex align-items-center">
                {% if request.session.cuenta_id %}
                    <a class="btn btn-outline-light mx-2" href="{% url 'tus_calificaciones' %}">Tus Calificaciones</a>
                    <a class="btn btn-outline-light mx-2" href="{% url 'calificaciones_pendientes' %}">Calificaciones Pendientes</a>
                    <a class="btn btn-outline-light mx-2" href="{% url 'agregar_calificacion' %}">Añadir Calificación</a>
                    <a class="btn btn-outline-light mx-2" href="{% url 'carga_masiva' %}">Carga Masiva</a>
                    <a class="btn btn-outline-light mx-2" href="{% url 'registrar_empresa' %}">Registrar Empresa</a>
                    <div class="dropdown">
                    <button class="btn btn-hamburger-b mx-2"
                            id="dropdownMenuButtonCalificador"
                            data-bs-toggle="dropdown"
                            aria-expanded="false"
                            aria-label="Menú de usuario">
                        <i class="bi bi-list" aria-hidden="true"></i>
                    </button>
                    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdownMenuButtonCalificador">
                        <li><a class="dropdown-item" href="{% url 'perfil_calificador' %}"><i class="bi bi-person-circle me-2"></i> Perfil</a></li>
                        <li><hr class="dropdown-divider"></li>
                        <li><a class="dropdown-item" href="#" data-bs-toggle="modal" data-bs-target="#modalCerrarSesion"><i class="bi bi-box-arrow-right me-2"></i> Cerrar Sesión</a></li>
                    </ul>
                    </div>
                {% else %}
                    <button class="btn btn-outline-secondary mx-2" type="button" disabled>Tus Calificaciones</button>
                    <button class="btn btn-outline-secondary mx-2" type="button" disabled>Calificaciones Pendientes</button>
                    <button class="btn btn-outline-secondary mx-2" type="button" disabled>Añadir Calificación</button>
                    <button class="btn btn-outline-secondary mx-2" type="button" disabled>Carga Masiva</button>
                    <button class="btn btn-outline-secondary mx-2" type="button" disabled>Registrar Empresa</button>
                    <a class="btn btn-outline-light mx-2" href="{% url 'identificacion' %}">Identificación</a>
                {% endif %}
            </div>
        </div>
    </nav>
{% endblock %}

{% block footer %}
    <!-- FOOTER -->
    <footer class="footer-nuam">
        <div class="footer-content">
            <div class="footer-col">
                <h4>Numeros de contacto</h4>
                <ul>
                    <li>Santiago de Chile: (+562) 2399 3000</li>
                    <li>Bogotá: (601) 3139000</li>
                    <li>Medellín: (604) 3117383</li>
                    <li>Lima: 619-3333</li>
                </ul>
            </div>
            <div class="footer-col">
                <h4>Correos de ayuda</h4>
                <ul>
                    <li>Chile: <a href="mailto:sac.cl@nuamx.com">sac.cl@nuamx.com</a></li>
                    <li>Colombia: <a href="mailto:sac.co@nuamx.com">sac.co@nuamx.com</a></li>
                    <li>Perú: <a href="mailto:sac.pe@nuamx.com">sac.pe@nuamx.com</a></li>
                </ul>
            </div>
            <div class="footer-col">
                <h4>Ubicacion de sedes</h4>
                <ul>
                    <li>La Bolsa 64, Región Metropolitana. Santiago - Chile</li>
                    <li>Sede Bogotá Calle 72: Carrera 7 No. 71-21 Edificio bvc. Torre B Piso 12</li>
                    <li>Sede Medellín: Carrera 43A No. 1-50 San Fernando Plaza, Torre bvc, Local 301.</li>
                    <li>Avenida Jorge Basadre 347 San Isidro, Lima - Perú</li>
                </ul>
            </div>
            <div class="footer-col footer-logo-col">
                <h4>Página de Nuam:</h4>
                <div class="footer-logo">
                    <a href="https://www.nuamx.com" target="_blank" rel="noopener">
                        <img src="{% static 'Contenedor_Calificaciones/images/logofooter.png' %}" alt="Nuam Logo">
                    </a>
                </div>
            </div>
        </div>
        <div class="footer-copyright">
            ©copyright 4Fantasticos. Todos los derechos reservados - 4Fantasticos
        </div>
    </footer>

    <!-- Modal de confirmación de cierre de sesión MEJORADO -->
<div class="modal fade" id="modalCerrarSesion" tabindex="-1" aria-labelledby="modalCerrarSesionLabel" aria-hidden="true" data-bs-backdrop="static" data-bs-keyboard="false">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content border-0 shadow-lg" style="border-radius: 20px; overflow: hidden;">
            
            <!-- Header con gradiente -->
            <div class="modal-header text-white position-relative" style="background: linear-gradient(135deg, #ff7043 0%, #f5732c 100%); border: none; padding: 24px;">
                <div class="w-100 text-center">
                    <div class="mb-2">
                        <i class="bi bi-exclamation-triangle-fill" style="font-size: 3. 5rem; filter: drop-shadow(0 4px 8px rgba(0,0,0,0.2));"></i>
                    </div>
                    <h4 class="modal-title fw-bold mb-0" id="modalCerrarSesionLabel">
                        ¿Cerrar Sesión?
                    </h4>
                </div>
                <button type="button" class="btn-close btn-close-white position-absolute top-0 end-0 m-3" data-bs-dismiss="modal" aria-label="Close" style="filter: drop-shadow(0 2px 4px rgba(0,0,0,0.2));"></button>
            </div>

            <!-- Body -->
            <div class="modal-body text-center py-5 px-4">
                <div class="mb-4">
                    <i class="bi bi-box-arrow-right" style="font-size: 4rem; color: #ff7043; opacity: 0.3;"></i>
                </div>
                <h5 class="mb-3 fw-bold text-dark">Estás a punto de cerrar tu sesión</h5>
                <p class="text-muted mb-4" style="font-size: 1.05rem;">
                    Deberás iniciar sesión nuevamente para acceder al sistema. <br>
                    <small class="d-block mt-2" style="font-size: 0.9rem;">¿Deseas continuar?</small>
                </p>
                
                <!-- Información adicional -->
                <div class="alert alert-warning border-0 d-flex align-items-center justify-content-center gap-2" style="background: rgba(255, 193, 7, 0.1); border-radius: 12px;">
                    <i class="bi bi-info-circle-fill text-warning"></i>
                    <small class="mb-0 text-dark">Cualquier trabajo no guardado se perderá</small>
                </div>
            </div>

            <!-- Footer con botones -->
            <div class="modal-footer border-0 justify-content-center pb-4 pt-0 px-4">
                <button type="button" class="btn btn-lg px-4 py-2" data-bs-dismiss="modal" style="background: #6c757d; color: white; border-radius: 12px; font-weight: 600; min-width: 140px; transition: all 0.3s ease;">
                    <i class="bi bi-x-circle me-2"></i> Cancelar
                </button>
                <a href="{% url 'logout' %}" class="btn btn-lg px-4 py-2" style="background: linear-gradient(135deg, #dc3545 0%, #c82333 100%); color: white; border: none; border-radius: 12px; font-weight: 600; min-width: 140px; box-shadow: 0 4px 12px rgba(220, 53, 69, 0.3); transition: all 0.3s ease;">
                    <i class="bi bi-box-arrow-right me-2"></i> Sí, Salir
                </a>
            </div>

        </div>
    </div>
</div>

<style>
/* Animaciones para el modal */
#modalCerrarSesion .modal-content {
    animation: modal-slide-in 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

@keyframes modal-slide-in {
    from {
        opacity: 0;
        transform: scale(0.9) translateY(-20px);
    }
    to {
        opacity: 1;
        transform: scale(1) translateY(0);
    }
}

/* Hover de botón Cancelar */
#modalCerrarSesion .modal-footer .btn:first-of-type:hover {
    background: #5a6268 !important;
    transform: translateY(-2px);
    box-shadow: 0 6px 16px rgba(108, 117, 125, 0.4);
}

/* Hover de botón Cerrar Sesión */
#modalCerrarSesion .modal-footer a.btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 20px rgba(220, 53, 69, 0.5) !important;
}

/* Fondo oscuro (backdrop) */
#modalCerrarSesion.modal {
    backdrop-filter: blur(3px);
}

/* Responsive */
@media (max-width: 576px) {
    #modalCerrarSesion .modal-dialog {
        margin: 1rem;
    }
    #modalCerrarSesion .modal-header i {
        font-size: 2.5rem ! important;
    }
    #modalCerrarSesion .modal-body i {
        font-size: 3rem !important;
    }
}
</style>

{% endblock %}